<div class="container mt-5" style="max-width: 700px;">
  <div class="card shadow-rounded-4 border-1 shadow p-4">
    <h5 class="mb-3">Edit Profile</h5>
    <hr />

    <form (ngSubmit)="save()" #f="ngForm" novalidate enctype="multipart/form-data">

      <!-- Profile Image Upload -->
      <div class="text-center mb-2 mt-2">
        <img [src]="preview || u.photo || 'assets/default-avatar.png'" class="rounded-circle shadow-sm mb-5"
          style="width: 150px; height: 150px; " alt="Profile" />

        <div class="d-flex justify-content-center align-items-center gap-2">
          <!-- File input -->
          <input type="file" (change)="onFileChange($event)" class="form-control w-80" accept="image/*" />

          <!-- Delete Icon -->
          <i class="fa-solid fa-trash fs-4" style="color: #bd0000; cursor: pointer;" (click)="removePhoto()"
            title="Remove photo"></i>

        </div>
      </div>

      <!-- Profile Fields -->
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Name <span class="text-danger">*</span></label>
          <input class="form-control" [(ngModel)]="u.name" name="name" required maxlength="50" pattern="[A-Za-z\s]{1,50}" oninput="this.value = this.value.replace(/[^A-Za-z\s]/g, '')">
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Employee ID</label>
          <input class="form-control" [(ngModel)]="u.empId" name="empId" maxlength="7" pattern="[0-9]{7}" oninput="this.value = this.value.replace(/\D/g, '')">
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Phone</label>
          <input type="tel" class="form-control" [(ngModel)]="u.phone" name="phone" maxlength="10" pattern="[0-9]{10}" oninput="this.value = this.value.replace(/\D/g, '')"
            
            required>
        </div>
        <!--   -->

        <div class="col-md-6 mb-3">
          <label class="form-label">Gender</label>
          <select class="form-select" [(ngModel)]="u.gender" name="gender" >
            <option value="" disabled>Select gender</option>
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
          </select>
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Department</label>
        <input class="form-control" [(ngModel)]="u.department" name="department" pattern="[A-Za-z\s]{1,50}" oninput="this.value = this.value.replace(/[^A-Za-z\s]/g, '')">
      </div>

      <!-- Buttons -->
      <div class="d-flex justify-content-end mt-4">
        <button class="btn btn-success" [disabled]="f.invalid">Save</button>
        <a routerLink="/profile" class="btn btn-secondary ms-2">Cancel</a>
      </div>
    </form>
  </div>
</div>