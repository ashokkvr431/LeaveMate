<nav class="navbar navbar-expand-lg navbar-dark bg-secondary shadow-sm px-3">
  <!-- Brand with Logo -->
  <a class="navbar-brand fw-bold d-flex align-items-center"
     [routerLink]="auth.isAdmin() ? 'admin/dashboard' : 'user/dashboard'">
    <img src="assets/logo2.png" alt="LeaveMate Logo" style="height: 45px; width: auto;" class="me-1">
  </a>

  <!-- Toggler -->
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar">
    <span class="navbar-toggler-icon"></span>
  </button>

  <!-- Navbar Items -->
  <div class="collapse navbar-collapse" id="mainNavbar">
    <ul class="navbar-nav ms-3 gap-lg-2" *ngIf="auth.isLoggedIn()">

      <!-- User Menu -->
      <ng-container *ngIf="auth.isUser()">
        <li class="nav-item fw-semibold">
          <a class="nav-link" routerLink="user/dashboard">Dashboard</a>
        </li>
        <li class="nav-item fw-semibold">
          <a class="nav-link" routerLink="user/leave/apply">Apply Leave</a>
        </li>
        <li class="nav-item fw-semibold">
          <a class="nav-link" routerLink="user/leave/my">My Leaves</a>
        </li>
        <li class="nav-item fw-semibold">
          <a class="nav-link" routerLink="user/attendance/mark">Mark Attendance</a>
        </li>
        <li class="nav-item fw-semibold">
          <a class="nav-link" routerLink="user/attendance/list">My Attendance</a>
        </li>
      </ng-container>

      <!-- Admin Menu -->
      <ng-container *ngIf="auth.isAdmin()">
        <li class="nav-item fw-semibold">
          <a class="nav-link" routerLink="/admin/dashboard">Dashboard</a>
        </li>
        <li class="nav-item fw-semibold">
          <a class="nav-link" routerLink="/admin/pending">Pending Approvals</a>
        </li>
        <li class="nav-item fw-semibold">
          <a class="nav-link" routerLink="/admin/attendance">Attendance</a>
        </li>
        <li class="nav-item fw-semibold">
          <a class="nav-link" routerLink="/admin/leave/approved">Approved Leaves</a>
        </li>
        <li class="nav-item fw-semibold">
          <a class="nav-link" routerLink="/admin/leave/rejected">Rejected Leaves</a>
        </li>
      </ng-container>
    </ul>

    <!-- Profile Dropdown -->
    <div class="ms-auto d-flex align-items-center" *ngIf="auth.isLoggedIn(); else guest">
      <div class="position-relative">
        <!-- Profile Image Trigger -->
        <img [src]="user?.photo || 'assets/default-profile.png'"
             class="rounded-circle border border-2 border-light"
             alt="Profile" width="45" height="45"
             (click)="toggleDropdown()" style="cursor: pointer;" />

        <!-- Dropdown Menu -->
        <ul class="dropdown-menu dropdown-menu-end mt-2"
            [class.show]="dropdownOpen"
            style="position: absolute; right: 0">
          <li>
            <a class="dropdown-item" routerLink="/profile">
              <i class="bi bi-person me-2"></i> Profile
            </a>
          </li>
          <li>
            <a class="dropdown-item" routerLink="/profile/edit">
              <i class="bi bi-pencil me-2"></i> Edit Profile
            </a>
          </li>
          <li><hr class="dropdown-divider" /></li>
          <li>
            <a class="dropdown-item text-danger" href="#" (click)="logout()">
              <i class="bi bi-box-arrow-right me-2"></i> Logout
            </a>
          </li>
        </ul>
      </div>
    </div>

    <!-- Guest -->
    <ng-template #guest>
      <div class="ms-auto">
        <a class="btn btn-outline-light btn-sm" routerLink="/login">Login</a>
      </div>
    </ng-template>
  </div>
</nav>
